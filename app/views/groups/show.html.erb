<div class="card">
  <div class="card-header">
    <span><%= group_state_badge(@group) %></span>
    Group
    <% if @group.label.present? %>
      <strong>"<%= @group.label %>"</strong>
    <% end %>
    <small>(<%= @group.mentor&.name %>)</small>
  </div>
  <div class="card-body">
    <%= link_to 'Edit', edit_group_path(@group), class: 'btn btn-primary active float-right' %>

    <h2>Mentor</h2>

    <% if @group.mentor %>
      <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Random ID</th>
            <th scope="col">Pronoun</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">About</th>
            <th scope="col">Tags</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td><%= link_to @group.mentor.random_id, @group.mentor %></td>
            <td><%= @group.mentor.pronoun %></td>
            <td><%= @group.mentor.name %></td>
            <td><%= @group.mentor.email %></td>
            <td><%= @group.mentor.about %></td>
            <td><%= @group.mentor.tag_list %></td>
          </tr>
        </tbody>
      </table>
      </div>
    <% else %>
      <p>No mentor assigned to this group.</p>
    <% end %>

    <h2>Mentees</h2>

    <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Random ID</th>
          <th scope="col">Pronoun</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">About</th>
          <th scope="col">Tags</th>
        </tr>
      </thead>

      <tbody>
        <% @group.mentees.each do |mentee| %>
          <tr>
            <td><%= link_to mentee.random_id, mentee %></td>
            <td><%= mentee.pronoun %></td>
            <td><%= mentee.name %></td>
            <td><%= mentee.email %></td>
            <td><%= mentee.about %></td>
            <td><%= mentee.tag_list %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    </div>
  </div>
</div>

<div class="row mt-12">
  <div class="col-md-12 mt-4 mb-4">
    <div class="border p-4">
      <h4 class="mb-4">Manage Group</h4>
      <div class="d-flex" style="gap:1rem;" role="group">
        <% if @group.done? %>
          <%= link_to 'Resend mail to mentor', { action: "done", id: @group }, { class: 'btn btn-warning btn-lg', data: { confirm: 'Are you sure you want to resend the mail to the mentor?' } } %>
        <% else %>
          <%= link_to 'Done (send mail to mentor)', { action: "done", id: @group }, { class: 'btn btn-success btn-lg', data: { confirm: 'Are you sure you want to send the mail to the mentor?' } } %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div class="border border-danger p-4">
      <h4 class="mb-4 text-danger">Danger Zone</h4>
      <div class="d-flex" style="gap:1rem;" role="group">
        <%= link_to 'Delete', @group, method: :delete, data: { confirm: 'This will delete the entire group and set all mentors / mentees back to "waiting".' }, class: 'btn btn-danger btn-lg' %>
      </div>
    </div>
  </div>
</div>